---
const currentDate = new Date();
const birthDate = new Date(2002, 9, 24);

let age = currentDate.getFullYear() - birthDate.getFullYear();
const monthDiff = currentDate.getMonth() - birthDate.getMonth();
const dayDiff = currentDate.getDate() - birthDate.getDate();

if (monthDiff < 0 || (monthDiff === 0 && dayDiff < 0)) {
    age--;
}

import aboutEs from "../i18n/es/about-me.json";
import aboutEn from "../i18n/en/about-me.json";

type Lang = "es" | "en";
const { lang = "es" } = Astro.props as { lang?: Lang };
const t = lang === "en" ? aboutEn : aboutEs;

function renderParagraph(text: string): string {
    const withAge = text.replace("{{age}}", String(age));
    return withAge.replace(/\*\*(.+?)\*\*/g, "<strong>$1</strong>");
}
---

<article
    class="flex flex-col items-center justify-center gap-8 text-gray-700 dark:text-gray-300 md:flex-row"
>
    <div
        class="[&>p]:mb-4 [&>p>strong]:text-yellow-500 dark:[&>p>strong]:text-yellow-100 [&>p>strong]:font-normal [&>p>strong]:font-mono text-pretty order-2 md:order-1"
    >
        <p set:html={renderParagraph(t.paragraph1)} />
        <p set:html={renderParagraph(t.paragraph2)} />
        <p set:html={renderParagraph(t.paragraph3)} />
    </div>
</article>
